"use strict";var art={};!function(a){a.remove=function(a,b){layer.msg("确定要删除吗？",{time:0,btn:["确定","取消"],yes:function(c){layer.close(c),$.post(jui.uri+"/article/del/"+a,function(a){a.success?b?$(b).parents("article").slideUp("fast",function(){$(this).remove()}):layer.msg(a.msg,{time:800,icon:1},function(){location.href=jui.uri+"/zone"}):layer.msg("操作失败",{icon:5})}).error(function(a,b,c){$.ER.handle(a,b,c)})}})},a.type=function(a,b){$.get(jui.uri+"/article/arts/"+a+"-"+b,function(a){$("#content-main").hide().empty().append(a).slideDown("fast").find(".thumb").lazyload({placeholder:jui.uri+"/static/f/images/thumbnail.gif",event:"scrollstop"})}).error(function(a,b,c){$.ER.handle(a,b,c)})},a.colet=function(a,b,c){$.get(jui.uri+"/colet/toggle/"+a+"-"+b,function(a){a.success&&0===b&&$(c).parents("article").slideUp("fast",function(){$(this).remove()})},"json").error(function(a,b,c){$.ER.handle(a,b,c)})},a.state=function(a,b,c){layer.msg("确定要恢复文章吗？",{time:0,btn:["确定","取消"],yes:function(d){layer.close(d),$.get(jui.uri+"/article/state/"+a+"-"+b,function(a){a.success?$(c).parents("article").slideUp("fast",function(){$(this).remove()}):layer.msg(a.msg,{icon:5})},"json").error(function(a,b,c){$.ER.handle(a,b,c)})}})},a.report=function(a,b,c){layer.prompt({formType:2,maxlength:20,title:"举报原因"},function(d,e){layer.close(e),$.get(jui.uri+"/report/"+a+"-"+b+"-"+d,function(a){a.success?($(c).remove(),layer.msg("举报成功，正在处理",{icon:1})):layer.msg(a.msg,{icon:5})}).error(function(a,b,c){$.ER.handle(a,b,c)})})}}(art),function(){var a={};a.follow=function(a,b){var d,e,f,c=!1;return 1==$.CK.get("IS_LOGIN")&&(c=!0),c?(d=$(b),e=d.attr("data-status"),f=$(b).parent(),$.post(jui.uri+"/follow/toggle/"+a+"-"+e,function(a){f.empty().append(a)}).error(function(a,b,c){$.ER.handle(a,b,c)}),void 0):$.LG.nl()},a.follower=function(a){$.post(jui.uri+"/follow/follower/"+a,function(a){$(".title").hide(),$("#content-follows").show(),$("#content-main").empty().append(a)}).error(function(a,b,c){$.ER.handle(a,b,c)})},a.following=function(a){$.post(jui.uri+"/follow/following/"+a,function(a){$(".title").hide(),$("#content-follows").show(),$("#content-main").empty().append(a)}).error(function(a,b,c){$.ER.handle(a,b,c)})},a.setup=function(a){if($(".setting-content").hide(),"avatar"===a){if(!$("#myxiuxiu")[0]){var b=document.createElement("script");b.setAttribute("src","http://open.web.meitu.com/sources/xiuxiu.js"),b.id="myxiuxiu",b.addEventListener("load",function(){var a=window.location.host;-1==a.indexOf("http://")&&(a="http://"+a),xiuxiu.embedSWF("altContent",5,"100%","100%"),xiuxiu.setUploadURL(a+jui.uri+"/upload?upload_type=avatar"),xiuxiu.setUploadType(2),xiuxiu.setUploadDataFieldName("file"),xiuxiu.onInit=function(){xiuxiu.loadPhoto(a+jui.uri+acc_avatar)},xiuxiu.onUploadResponse=function(a){var c,d,e,b=JSON.parse(a);b.success?(c=b.data.path,d=jui.uri+"/acc/set",e={"info.acc_avatar":c,"info.acc_no":$("#acc_no").val(),type:2,prev_avatar:acc_avatar},$.post(d,e,function(a){a.success&&($(".log-info-avatar").attr("src",c),acc_avatar=c),layer.msg(b.msg,{time:800,icon:1})},"json").error(function(a,b,c){$.ER.handle(a,b,c)})):layer.msg(b,{time:800,icon:5})}}),document.body.appendChild(b)}}else"pwd"===a&&$(".form-pwd").focus(function(){var a=$(this),b=a.attr("type");"password"!==b&&a.attr("type","password")});$("#"+a+"-setting").show()},window["acc"]=a}();